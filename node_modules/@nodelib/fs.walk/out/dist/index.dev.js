"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Settings = exports.walkStream = exports.walkSync = exports.walk = void 0;

var async_1 = require("./providers/async");

var stream_1 = require("./providers/stream");

var sync_1 = require("./providers/sync");

var settings_1 = require("./settings");

exports.Settings = settings_1["default"];

function walk(directory, optionsOrSettingsOrCallback, callback) {
  if (typeof optionsOrSettingsOrCallback === 'function') {
    new async_1["default"](directory, getSettings()).read(optionsOrSettingsOrCallback);
    return;
  }

  new async_1["default"](directory, getSettings(optionsOrSettingsOrCallback)).read(callback);
}

exports.walk = walk;

function walkSync(directory, optionsOrSettings) {
  var settings = getSettings(optionsOrSettings);
  var provider = new sync_1["default"](directory, settings);
  return provider.read();
}

exports.walkSync = walkSync;

function walkStream(directory, optionsOrSettings) {
  var settings = getSettings(optionsOrSettings);
  var provider = new stream_1["default"](directory, settings);
  return provider.read();
}

exports.walkStream = walkStream;

function getSettings() {
  var settingsOrOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

  if (settingsOrOptions instanceof settings_1["default"]) {
    return settingsOrOptions;
  }

  return new settings_1["default"](settingsOrOptions);
}