"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
Object.defineProperty(exports, "applyImportantSelector", {
  enumerable: true,
  get: function get() {
    return applyImportantSelector;
  }
});

var _postcssselectorparser =
/*#__PURE__*/
_interop_require_default(require("postcss-selector-parser"));

var _pseudoElements = require("./pseudoElements");

function _interop_require_default(obj) {
  return obj && obj.__esModule ? obj : {
    "default": obj
  };
}

function applyImportantSelector(selector, important) {
  var sel = (0, _postcssselectorparser["default"])().astSync(selector);
  sel.each(function (sel) {
    // Wrap with :is if it's not already wrapped
    var isWrapped = sel.nodes[0].type === "pseudo" && sel.nodes[0].value === ":is" && sel.nodes.every(function (node) {
      return node.type !== "combinator";
    });

    if (!isWrapped) {
      sel.nodes = [_postcssselectorparser["default"].pseudo({
        value: ":is",
        nodes: [sel.clone()]
      })];
    }

    (0, _pseudoElements.movePseudos)(sel);
  });
  return "".concat(important, " ").concat(sel.toString());
}