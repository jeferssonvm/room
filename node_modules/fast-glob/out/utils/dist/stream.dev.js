"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.merge = void 0;

var merge2 = require("merge2");

function merge(streams) {
  var mergedStream = merge2(streams);
  streams.forEach(function (stream) {
    stream.once('error', function (error) {
      return mergedStream.emit('error', error);
    });
  });
  mergedStream.once('close', function () {
    return propagateCloseEventToSources(streams);
  });
  mergedStream.once('end', function () {
    return propagateCloseEventToSources(streams);
  });
  return mergedStream;
}

exports.merge = merge;

function propagateCloseEventToSources(streams) {
  streams.forEach(function (stream) {
    return stream.emit('close');
  });
}